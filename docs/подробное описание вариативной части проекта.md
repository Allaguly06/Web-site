# üí¨ –í–µ–±-–º–µ—Å—Å–µ–¥–∂–µ—Ä –Ω–∞ Flask + Socket.IO

## üìå –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ:
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É
- –í—ã–±–∏—Ä–∞—Ç—å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–µ—Å—Ç–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (—á–µ—Ä–µ–∑ WebSocket)
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üîç –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é? –ü—Ä–æ—Å—Ç–∞—è, –ø—Ä–∏–≤–∞—Ç–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞.
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —á–∞—Ç, –∏—Å—Ç–æ—Ä–∏—è, –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.
1. –û—Å–Ω–æ–≤—ã –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–±—Ä–∞—É–∑–µ—Ä–æ–º) –∏ —Å–µ—Ä–≤–µ—Ä–æ–º.
–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É HTTP-–∑–∞–ø—Ä–æ—Å–∞–º–∏ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –ø–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–æ–≤) –∏ WebSocket (–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏).
2. –ß—Ç–æ —Ç–∞–∫–æ–µ WebSocket –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω
WebSocket ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º.
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —á–∞—Ç–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É Socket.IO.
3. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —á–∞—Ç–∞
–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º –¥–≤–µ —Å—É—â–Ω–æ—Å—Ç–∏:
User: —Ö—Ä–∞–Ω–∏—Ç –∏–º—è –∏ –ø–∞—Ä–æ–ª—å (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π).
Message: —Ö—Ä–∞–Ω–∏—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –ø–æ–ª—É—á–∞—Ç–µ–ª—è, —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –≤—Ä–µ–º—è.
–ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏–º–µ—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –∫—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª –∏ –∫—Ç–æ –ø–æ–ª—É—á–∏–ª.
4. –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –∑–∞—Ç–µ–º –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É.
–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–µ—Å—Å–∏—è, —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä ¬´–ø–æ–º–Ω–∏–ª¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è session –≤ Flask –∏ werkzeug.security –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π.
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç (rooms) –≤ —á–∞—Ç–µ
–î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –¥–≤—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
–†–µ—à–µ–Ω–∏–µ: —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∫–æ–º–Ω–∞—Ç—É (room), –æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –Ω–∞ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä 1_3.
–û–±–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –∫ –æ–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ –∏ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë.
6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
–°–µ—Ä–≤–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏–µ send_private_message, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –µ–≥–æ –≤—Å–µ–º –≤ –∫–æ–º–Ω–∞—Ç–µ.
–ö–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä) –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–ª—É—à–∞—Ç–µ–ª—è receive_private_message –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
7. –ö–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
–ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (SQLite) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è.
–ü—Ä–∏ –∑–∞—Ö–æ–¥–µ –≤ —á–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
8. –û—Å–Ω–æ–≤—ã HTML/CSS/Bootstrap
–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞, —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–±–ª–∞—Å—Ç–∏ —á–∞—Ç–∞.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ Bootstrap ‚Äî —É—Å–∫–æ—Ä—è–µ—Ç —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—é.
9. –†–∞–±–æ—Ç–∞ Flask —Å —à–∞–±–ª–æ–Ω–∞–º–∏ Jinja2
Jinja2 –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω–µ–¥—Ä—è—Ç—å Python-–∫–æ–¥ –≤ HTML.
–ß–µ—Ä–µ–∑ render_template() –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π).
### 2. –í—ã–±–æ—Ä —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è             | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                             |
|------------------|------------------------|----------------------------------------|
| Backend          | Flask                  | Python-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π    |
| Realtime         | Flask-SocketIO         | WebSocket –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏       |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö      | SQLite + SQLAlchemy    | –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π     |
| Frontend         | HTML, Bootstrap        | –£–¥–æ–±–Ω—ã–π UI                             |
| –®–∞–±–ª–æ–Ω—ã          | Jinja2                 | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü         |

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
chat-app/
‚îú‚îÄ‚îÄ app.py # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ templates/ # HTML-—à–∞–±–ª–æ–Ω—ã (Jinja2)
‚îÇ ‚îú‚îÄ‚îÄ base.html
‚îÇ ‚îú‚îÄ‚îÄ index.html
‚îÇ ‚îú‚îÄ‚îÄ login.html
‚îÇ ‚îú‚îÄ‚îÄ register.html
‚îÇ ‚îî‚îÄ‚îÄ chats.html
‚îú‚îÄ‚îÄ static/
‚îÇ ‚îî‚îÄ‚îÄ style.css # –°—Ç–∏–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ chat.db # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```
---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install flask flask_sqlalchemy flask_socketio eventlet werkzeug
python app.py
```
–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–°–æ–∑–¥–∞–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –Ω—É–∂–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
```
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install flask flask-socketio flask_sqlalchemy werkzeug
```
---

–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ app.py
```
from flask import Flask, render_template, request, redirect, url_for, session
from flask_sqlalchemy import SQLAlchemy
from flask_socketio import SocketIO, emit, join_room
from werkzeug.security import generate_password_hash, check_password_hash
from datetime import datetime
import os

app = Flask(__name__)
app.secret_key = os.urandom(24)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///chat.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
db = SQLAlchemy(app)
```
---

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SocketIO
socketio = SocketIO(app)

–®–∞–≥ 3: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
```
class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(100), unique=True, nullable=False)
    password = db.Column(db.String(200), nullable=False)

class Message(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    sender_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)
    recipient_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)
    content = db.Column(db.Text, nullable=False)
    timestamp = db.Column(db.DateTime, default=datetime.utcnow)

    sender = db.relationship('User', foreign_keys=[sender_id])
    recipient = db.relationship('User', foreign_keys=[recipient_id])
```
--- 
–®–∞–≥ 4: –ú–∞—Ä—à—Ä—É—Ç—ã Flask
```
@app.route('/')
def index():
    if 'user_id' not in session:
        return redirect(url_for('login'))
    user = User.query.get(session['user_id'])
    users = User.query.filter(User.id != user.id).all()
    return render_template('index.html', user=user, users=users)

@app.route('/register', methods=['GET', 'POST'])
def register():
    if request.method == 'POST':
        username = request.form['username']
        password = generate_password_hash(request.form['password'])

        if User.query.filter_by(username=username).first():
            return "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

        user = User(username=username, password=password)
        db.session.add(user)
        db.session.commit()
        return redirect(url_for('login'))
    return render_template('register.html')

@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form['password']

        user = User.query.filter_by(username=username).first()
        if user and check_password_hash(user.password, password):
            session['user_id'] = user.id
            return redirect(url_for('index'))
        return render_template('login.html', error="–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å", username=username)
    return render_template('login.html')

@app.route('/logout')
def logout():
    session.pop('user_id', None)
    return redirect(url_for('login'))

@app.route('/chat/<int:recipient_id>')
def private_chat(recipient_id):
    if 'user_id' not in session:
        return redirect(url_for('login'))

    user = User.query.get(session['user_id'])
    recipient = User.query.get(recipient_id)

    messages = Message.query.filter(
        ((Message.sender_id == user.id) & (Message.recipient_id == recipient.id)) |
        ((Message.sender_id == recipient.id) & (Message.recipient_id == user.id))
    ).order_by(Message.timestamp).all()

    return render_template('chats.html', user=user, recipient=recipient, messages=messages)
```
---
–®–∞–≥ 5: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Socket.IO
```
@socketio.on('join')
def on_join(data):
    room = f"{min(session['user_id'], data['recipient_id'])}_{max(session['user_id'], data['recipient_id'])}"
    join_room(room)

@socketio.on('send_private_message')
def handle_private_message(data):
    sender = User.query.get(session['user_id'])
    content = data['message'].strip()
    recipient_id = data['recipient_id']
    if not content:
        return

    message = Message(sender_id=sender.id, recipient_id=recipient_id, content=content)
    db.session.add(message)
    db.session.commit()

    room = f"{min(sender.id, recipient_id)}_{max(sender.id, recipient_id)}"
    emit('receive_private_message', {
        'username': sender.username,
        'content': content,
        'user_id': sender.id
    }, room=room)
```
---
–®–∞–≥ 6: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```
@app.cli.command('init-db')
def init_db():
    db.create_all()
    print("–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.")

---
–®–∞–≥ 7: HTML-—à–∞–±–ª–æ–Ω—ã (templates/)

base.html ‚Äî –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω (–Ω–∞–≤–∏–≥–∞—Ü–∏—è, —Å—Ç–∏–ª–∏)

index.html ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —á–∞—Ç

register.html / login.html ‚Äî —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞

chats.html ‚Äî –æ–∫–Ω–æ –¥–∏–∞–ª–æ–≥–∞ + –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Socket.IO:
```
---
```
<script>
var socket = io();
var currentUserId = {{ user.id }};
var recipientId = {{ recipient.id }};
var room = `${Math.min(currentUserId, recipientId)}_${Math.max(currentUserId, recipientId)}`;

socket.emit('join', { recipient_id: recipientId });

document.getElementById('chat-form').addEventListener('submit', function(e) {
    e.preventDefault();
    var messageInput = document.querySelector('input[name="message"]');
    var message = messageInput.value;
    if (message.trim() === "") return;

    socket.emit('send_private_message', {
        message: message,
        recipient_id: recipientId
    });

    messageInput.value = '';
});

socket.on('receive_private_message', function(data) {
    if (data.user_id !== currentUserId && recipientId !== data.user_id) return;

    var chatBox = document.getElementById('chat-box');
    var newMessage = document.createElement('div');
    var isSender = currentUserId === data.user_id;
    newMessage.className = 'd-flex ' + (isSender ? 'justify-content-end' : 'justify-content-start');
    newMessage.innerHTML = `<span class="p-2 text-white bg-${isSender ? 'primary' : 'success'}">
                                <strong>${data.username}:</strong> ${data.content}
                            </span>`;
    chatBox.appendChild(newMessage);
    chatBox.scrollTop = chatBox.scrollHeight;
});
</script>
```
--- 
–®–∞–≥ 8: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
flask run
# –∏–ª–∏
python app.py
```
---
–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è
## üì∏ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### üìå –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞

![–í—Ö–æ–¥](src/registr.png)

### üìå –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](src/index.png)

### üìå –ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

![–ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º](src/chats1.png)
![–ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º](src/chats2.png)
![–ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º](src/chats3.png)

---

# üìå–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (UML Component Diagram) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —á–∞—Å—Ç–∏ (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã) —Å–∏—Å—Ç–µ–º—ã –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. –û–Ω–∞ –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∫–∞–∫ —Ä–∞–∑–±–∏—Ç –ø—Ä–æ–µ–∫—Ç –Ω–∞ –º–æ–¥—É–ª–∏ –∏ –∫–∞–∫ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π.
![–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](src/–î–∏–∞–≥—Ä–∞–º–º–∞_–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.png)
# üîß –ß—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–¢–∏–ø (–§–æ—Ä–º–∞)	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Web Browser	üü¢ –≠–ª–∏–ø—Å	–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å, —Å –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Flask —á–µ—Ä–µ–∑ WebSocket –∏–ª–∏ HTTP.
Flask Server (app.py)	üü¶ –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫	–û—Å–Ω–æ–≤–Ω–æ–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Flask. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π, —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –¥–∞–Ω–Ω—ã—Ö.
Database (SQLite)	üü£ –¶–∏–ª–∏–Ω–¥—Ä	–õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞.

# üîÅ –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (—Å—Ç—Ä–µ–ª–∫–∏)
–û—Ç –∫–æ–≥–æ ‚Üí –ö–æ–º—É	–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç
Web Browser ‚Üí Flask Server	–ë—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Socket.IO –∏–ª–∏ HTTP).
Flask Server ‚Üí Database	–°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ë–î –¥–ª—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö.

# üéØ –ö–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–∏–∞–≥—Ä–∞–º–º–∞?
–≠—Ç–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–º–æ–≥–∞–µ—Ç:

–ü–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –∫–∞–∫–∏–µ –≥–ª–∞–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –µ—Å—Ç—å –∏ –∫–∞–∫ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã.

–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, Flask –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–û–±—ä—è—Å–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥—Ä—É–≥–∏–º ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è —á–∞—Å—Ç—å –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –∑–∞—â–∏—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞.

–£–ø—Ä–æ—Å—Ç–∏—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —É–≤–∏–¥–µ—Ç—å, –∫—É–¥–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Redis –∏–ª–∏ –≤–Ω–µ—à–Ω—é—é API).

# üîç –ö–∞–∫ —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å  –ø—Ä–æ–µ–∫—Ç–æ–º (—á–∞—Ç–æ–º –Ω–∞ Flask + Socket.IO):
Web Browser ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç JS, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ WebSocket.

Flask Server ‚Äî —á–µ—Ä–µ–∑ app.py –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç Socket.IO —Å–æ–±—ã—Ç–∏—è (send_private_message, receive_private_message –∏ —Ç.–¥.).

SQLite ‚Äî —Ö—Ä–∞–Ω–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏—Å—Ç–æ—Ä–∏—é –∏ –¥—Ä—É–≥—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

--- 
# üìå –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–∏–ª–∏ Sequence Diagram) ‚Äî —ç—Ç–æ –≤–∏–¥ UML-–¥–∏–∞–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã.

–û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—É—Ç—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ, –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ë—Ä–∞—É–∑–µ—Ä ‚Üí Socket.IO ‚Üí –°–µ—Ä–≤–µ—Ä (Flask) ‚Üí –æ–±—Ä–∞—Ç–Ω–æ.
![–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](src/–¥–∏–∞–≥—Ä–∞–º–º–∞_—Å–æ–æ–±—â–µ–Ω–∏–π.png)
# üéØ –ö–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç?
–≠—Ç–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞:

‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–∞—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

‚úÖ –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.

‚úÖ –ü–æ–ª–µ–∑–Ω–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ.

‚úÖ –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –¥–∏–∑–∞–π–Ω–∞ API, –æ—Ç–ª–∞–¥–∫–µ –æ—à–∏–±–æ–∫, –æ–±—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã.

# üîÑ –ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ –≤ –¥–∏–∞–≥—Ä–∞–º–º–µ?
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–†–æ–ª—å –∏ —Ñ—É–Ω–∫—Ü–∏—è
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å	–í–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
üåê –ë—Ä–∞—É–∑–µ—Ä	–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥, –≤—ã–∑—ã–≤–∞–µ—Ç emit() —Å–æ–±—ã—Ç–∏–µ Socket.IO
üîå Socket.IO	–í—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —Å–ª–æ–π –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º
üñ•Ô∏è –°–µ—Ä–≤–µ—Ä Flask	–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ë–î, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ

# üîÅ –≠—Ç–∞–ø—ã –ø—Ä–æ—Ü–µ—Å—Å–∞:
‚Ññ	–û–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
1	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2	–ë—Ä–∞—É–∑–µ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç emit('send_private_message') –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ Socket.IO
3	Socket.IO –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ë–î
4	–°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ receive_private_message –æ–±—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ Socket.IO
5	–ë—Ä–∞—É–∑–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
6	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

# üìò –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?
üîß –î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ (—á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫—Ç–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏ –≤ –∫–∞–∫–æ–π –º–æ–º–µ–Ω—Ç).

üí° –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –ª–∏—à–Ω–∏–µ —à–∞–≥–∏).

üß™ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏ ‚Äî –º–æ–∂–Ω–æ —Å–≤–µ—Ä—è—Ç—å—Å—è —Å –¥–∏–∞–≥—Ä–∞–º–º–æ–π, –ø—Ä–æ–≤–µ—Ä—è—è, –≤—Å–µ –ª–∏ —Å–æ–±—ã—Ç–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç.

üìö –î–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–µ –ø—Ä–æ–µ–∫—Ç–∞.

---
# UML –î–∏–∞–≥—Ä–∞–º–º–∞ –ö–ª–∞—Å—Å–æ–≤ ‚Äî –ß–∞—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
## üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–î–∞–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ —á–∞—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã, –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞, –º–µ—Ç–æ–¥—ã –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–¥–∞.

# üì¶ –ö–ª–∞—Å—Å—ã
üîπ User
–û–ø–∏—Å–∞–Ω–∏–µ: –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã.

–°–≤–æ–π—Å—Ç–≤–∞:

id: int ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

username: str ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

password_hash: str ‚Äî —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å.

–ú–µ—Ç–æ–¥—ã:

check_password(password: str): bool ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è.

set_password(password: str): void ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ö—ç—à –ø–∞—Ä–æ–ª—è.

![–î–∏–∞–≥—Ä–∞–º–º–∞ –ö–ª–∞—Å—Å–æ–≤](src/–î–∏–∞–≥—Ä–∞–º–º–∞_–∫–ª–∞—Å—Å–æ–≤.png)
# üîπ Message
–û–ø–∏—Å–∞–Ω–∏–µ: –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π.

–°–≤–æ–π—Å—Ç–≤–∞:

id: int ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è.

sender_id: int ‚Äî ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è.

recipient_id: int ‚Äî ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è.

content: str ‚Äî —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.

timestamp: datetime ‚Äî –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏.

–ú–µ—Ç–æ–¥—ã:

save(): void ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

# üîπ SessionManager
–û–ø–∏—Å–∞–Ω–∏–µ: –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–µ—Å—Å–∏—è–º–∏.

–°–≤–æ–π—Å—Ç–≤–∞:

sessions: dict ‚Äî –∫–æ–ª–ª–µ–∫—Ü–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π.

–ú–µ—Ç–æ–¥—ã:

create_session(user_id: int): str ‚Äî —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é.

get_user(session_id: str): User ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID —Å–µ—Å—Å–∏–∏.

# üîπ SocketHandler
–û–ø–∏—Å–∞–Ω–∏–µ: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–∫–µ—Ç-—Å–æ–±—ã—Ç–∏—è –∏ –ª–æ–≥–∏–∫–∏ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

–°–≤–æ–π—Å—Ç–≤–∞:

rooms: dict ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–Ω–∞—Ç–∞—Ö.

–ú–µ—Ç–æ–¥—ã:

join_room(user_id: int, recipient_id: int): void ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –∫–æ–º–Ω–∞—Ç–µ.

send_message(data: dict): void ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç.

# üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏
–û—Ç	–ö–æ–º—É	–¢–∏–ø —Å–≤—è–∑–∏	–û–ø–∏—Å–∞–Ω–∏–µ
Message	User	–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è	sender_id –∏ recipient_id —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ User.
SessionManager	User	–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
SocketHandler	SessionManager	–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å	–û–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –¥–∞–Ω–Ω—ã–º —Å–µ—Å—Å–∏–π.
SocketHandler	Message	–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è	–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.